import{a as A,b as j,c as V,d as z}from"./chunk-KQZRMZT2.js";import{a as B,r as D,s as O,y as C,z as k}from"./chunk-TOAXJM3U.js";import"./chunk-XGKKOOTV.js";import{A as x,Cb as M,Da as p,Eb as T,Fb as _,Pb as u,Qa as s,Z as N,a as r,ab as E,b as c,d as P,da as d,dc as n,fb as f,la as I,ma as w,mb as v,rb as h,s as b,wb as l,wc as F,xb as g,yb as y}from"./chunk-ERFRTTSI.js";var L=class o{url="location";http=d(B);stateLocations=p(k);getFormatedLocations(){return Array.from(this.stateLocations().locations.values())}getLocationById(t){return this.stateLocations().locations.get(t)}constructor(){this.getLocations({page:1})}getLocations(e){return P(this,arguments,function*({page:t}){this.setLoading(!0),yield b(x(150)),this.http.get(`${this.url}?page=${t}`).subscribe({next:({info:i,results:m})=>{this.deleteLocations(),m.forEach(a=>{this.stateLocations().locations.set(a.id,a)}),this.stateLocations.update(a=>c(r({},a),{locations:this.stateLocations().locations,info:{count:i.count,pages:i.pages,next:i.next,prev:i.prev,currentPage:t},isLoading:!1}))}})})}setLoading(t){this.stateLocations.update(e=>c(r({},e),{isLoading:t}))}deleteLocations(){this.stateLocations.update(t=>c(r({},t),{locations:new Map}))}setNavigationType(t){this.stateLocations.update(e=>c(r({},e),{navigationType:t}))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=N({token:o,factory:o.\u0275fac,providedIn:"root"})};function $(o,t){o&1&&y(0,"mat-progress-bar",4)}function G(o,t){if(o&1){let e=M();l(0,"div",3),f(1,$,1,0,"mat-progress-bar",4),y(2,"app-basic-table",5),l(3,"mat-paginator",6,0),T("page",function(m){I(e);let a=_();return w(a.handlePageEvent(m))}),g()()}if(o&2){let e=_();s(),h(e.isLoading()?1:-1),s(),v("columns",e.columns())("data",e.locations())("isLoading",e.isLoading()),s(),v("pageSize",e.locations().length)("length",e.total())("showFirstLastButtons",!0)("pageIndex",e.currentPage())}}function H(o,t){o&1&&u(0," Galeria ")}var S=class o{locationService=d(L);locations=n(()=>this.locationService.getFormatedLocations());total=n(()=>this.locationService.stateLocations().info.count);currentPage=n(()=>this.locationService.stateLocations().info.currentPage-1);isLoading=n(()=>this.locationService.stateLocations().isLoading);totalPages=n(()=>this.locationService.stateLocations().info.pages);navigationType=n(()=>this.locationService.stateLocations().navigationType);columns=p(C);displayedColumns=p(C);setPage(t){this.locationService.getLocations({page:t})}handlePageEvent(t){this.setPage(t.pageIndex+1)}setNavigationType(t){this.locationService.setNavigationType(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=E({type:o,selectors:[["app-locations"]],decls:7,vars:2,consts:[["paginator",""],[1,"container-page"],[3,"navigationTypeSelected","navigationType"],[1,"container-table","shadow-lg","p-3"],["mode","indeterminate"],[3,"columns","data","isLoading"],[3,"page","pageSize","length","showFirstLastButtons","pageIndex"]],template:function(e,i){e&1&&(l(0,"p"),u(1,"locations works!"),g(),u(2,`,
`),l(3,"section",1)(4,"app-navigation-pages",2),T("navigationTypeSelected",function(a){return i.setNavigationType(a)}),g(),f(5,G,5,8,"div",3)(6,H,1,0),g()),e&2&&(s(4),v("navigationType",i.navigationType()),s(),h(i.navigationType()==="table"?5:6))},dependencies:[F,j,A,V,O,D,z],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};export{S as default};
