import{a as D,b as j,c as R,d as W}from"./chunk-KQZRMZT2.js";import{a as A,r as F,s as B,u as V,v as H,w as z}from"./chunk-TOAXJM3U.js";import"./chunk-XGKKOOTV.js";import{A as P,Cb as I,Da as p,Eb as y,Fb as T,Pb as w,Qa as o,Z as x,a as s,ab as E,b as c,d as _,da as h,dc as n,fb as u,la as N,ma as L,mb as m,rb as v,s as b,wb as l,wc as M,xb as C,yb as f}from"./chunk-ERFRTTSI.js";var d=class a{url="character";http=h(A);stateCharacters=p(z);getFormatedCharacters(){return Array.from(this.stateCharacters().characters.values())}getCharacterById(e){return this.stateCharacters().characters.get(e)}constructor(){this.getCharacters({page:1})}getCharacters(t){return _(this,arguments,function*({page:e}){this.setLoading(!0),yield b(P(150)),this.http.get(`${this.url}?page=${e}`).subscribe({next:({info:r,results:g})=>{this.deleteCharacters(),g.forEach(i=>{this.stateCharacters().characters.set(i.id,i)}),this.stateCharacters.update(i=>c(s({},i),{characters:this.stateCharacters().characters,info:{count:r.count,pages:r.pages,next:r.next,prev:r.prev,currentPage:e},isLoading:!1}))}})})}setLoading(e){this.stateCharacters.update(t=>c(s({},t),{isLoading:e}))}deleteCharacters(){this.stateCharacters.update(e=>c(s({},e),{characters:new Map}))}setNavigationType(e){this.stateCharacters.update(t=>c(s({},t),{navigationType:e}))}static \u0275fac=function(t){return new(t||a)};static \u0275prov=x({token:a,factory:a.\u0275fac,providedIn:"root"})};function k(a,e){a&1&&f(0,"mat-progress-bar",4)}function G(a,e){if(a&1){let t=I();l(0,"div",3),u(1,k,1,0,"mat-progress-bar",4),f(2,"app-basic-table",5),l(3,"mat-paginator",6,0),y("page",function(g){N(t);let i=T();return L(i.handlePageEvent(g))}),C()()}if(a&2){let t=T();o(),v(t.isLoading()?1:-1),o(),m("columns",t.columns())("data",t.characters())("isLoading",t.isLoading()),o(),m("pageSize",t.characters().length)("length",t.total())("showFirstLastButtons",!0)("pageIndex",t.currentPage())}}function O(a,e){a&1&&w(0," Galeria ")}var S=class a{characterService=h(d);characters=n(()=>this.characterService.getFormatedCharacters());total=n(()=>this.characterService.stateCharacters().info.count);currentPage=n(()=>this.characterService.stateCharacters().info.currentPage-1);isLoading=n(()=>this.characterService.stateCharacters().isLoading);totalPages=n(()=>this.characterService.stateCharacters().info.pages);navigationType=n(()=>this.characterService.stateCharacters().navigationType);columns=p(V);displayedColumns=p(H);setPage(e){this.characterService.getCharacters({page:e})}handlePageEvent(e){this.setPage(e.pageIndex+1)}setNavigationType(e){this.characterService.setNavigationType(e)}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=E({type:a,selectors:[["app-characters"]],decls:4,vars:2,consts:[["paginator",""],[1,"container-page"],[3,"navigationTypeSelected","navigationType"],[1,"container-table","shadow-lg","p-3"],["mode","indeterminate"],[3,"columns","data","isLoading"],[3,"page","pageSize","length","showFirstLastButtons","pageIndex"]],template:function(t,r){t&1&&(l(0,"section",1)(1,"app-navigation-pages",2),y("navigationTypeSelected",function(i){return r.setNavigationType(i)}),C(),u(2,G,5,8,"div",3)(3,O,1,0),C()),t&2&&(o(),m("navigationType",r.navigationType()),o(),v(r.navigationType()==="table"?2:3))},dependencies:[M,j,D,R,B,F,W],encapsulation:2,changeDetection:0})};export{S as default};
